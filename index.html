<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<HEAD>
    <TITLE>Test</TITLE>
</HEAD>
<BODY>
<section id="app">
    loading...
</section>
</BODY>
<script>
    const loadJSON = (callback) => {
        const xObj = new XMLHttpRequest();
        xObj.overrideMimeType("application/json");
        xObj.open('GET', 'data_index.json', true);
        xObj.onreadystatechange = () => {
            if (xObj.readyState === 4 && xObj.status === 200) {
                callback(xObj.responseText);
            }
        };
        xObj.send(null);
    }

    const init = () => {
        loadJSON((response) => {
            const json = JSON.parse(response);
            const app = document.querySelector('#app');
            let html = '<p>';
            let fileNameNotExtension = '';
            let fileCaption = '';
            for (const [key, value] of Object.entries(json)) {
                fileNameNotExtension = `${value}`.split('.').slice(0, -1).join('.');
                fileCaption = fileNameNotExtension.replaceAll('_', ' ');
                fileCaption = fileCaption.replaceAll('darbotvarke', 'darbotvarkė');
                fileCaption = fileCaption.replaceAll('dienotvarke', 'dienotvarkė');
                html += `<a href="${value}" target="_blank" rel="noopener noreferrer">${fileCaption}</a><br>`;
            }
            html += '<p>';
            app.innerHTML = html;
        });
    }
    init();
</script>
</HTML>
